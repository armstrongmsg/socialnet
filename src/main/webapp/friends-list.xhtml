<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
      <title>Friends</title>		
      <h:outputStylesheet library = "css" name = "styles.css"  /> 	
   </h:head>

<h:body>
	<h:form>
		<p:toolbar>
			<f:facet name="left">
				<p:commandButton action = "#{navigationController.showPage}"
            			value = "Home" >
            			<f:param name = "pageId" value = "user-home" />
        		</p:commandButton>
				<p:commandButton action="#{navigationController.showPage}"
						value="Profile" >
						<f:param name="pageId" value="user-profile" />
						<f:setPropertyActionListener target="#{contextBean.viewUser}" 
					    value="" />
				</p:commandButton>
				<p:commandButton action="#{navigationController.showPage}"
						value="Friends">
						<f:param name="pageId" value="friends-list" />
				</p:commandButton>
				<p:commandButton action="#{navigationController.showPage}"
						value="Follows">
						<f:param name="pageId" value="follows-list" />
				</p:commandButton>
			</f:facet>
			<f:facet name="right">
				<p:commandButton value="Logout" action="#{contextBean.logout}" />
			</f:facet>
		</p:toolbar>
	</h:form>

  	<hr />

      <h:form>
         <h:dataTable value = "#{friendshipBean.selfFriends}" var = "friend"
            styleClass = "usersTable"
            headerClass = "usersTableHeader"
            rowClasses = "usersTableOddRow,usersTableEvenRow">
            
            <h:column>    				
               <f:facet name = "header"></f:facet>
               <h:commandButton value="#{friend.username}"
					action="#{navigationController.showPage}">
					<f:param name="pageId" value="user-profile" />
					<f:setPropertyActionListener target="#{contextBean.viewUser}" 
					    value="#{friend}" />
				</h:commandButton>
            </h:column>
         </h:dataTable>
      </h:form>
      
      <hr />
	
	Recommended users
	
	<h:form>
		<h:dataTable value="#{friendshipBean.friendRecommendations}" var="user"
			styleClass="usersTable" headerClass="usersTableHeader"
			rowClasses="usersTableOddRow,usersTableEvenRow">

			<h:column>
				<f:facet name="header"></f:facet>
				<h:commandButton value="#{user.username}"
					action="#{navigationController.showPage}">
					<f:param name="pageId" value="user-profile" />
					<f:setPropertyActionListener target="#{contextBean.viewUser}" 
					    value="#{user}" />
				</h:commandButton>
			</h:column>
		</h:dataTable>
	</h:form>
	
	<hr />

	<h:form>
      	<h:commandButton action = "#{navigationController.showPage}"
            value = "Back" >
            <f:param name = "pageId" value = "user-home" />
        </h:commandButton>
    </h:form>
	
	<br />
</h:body>
</html>